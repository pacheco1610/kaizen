{"ast":null,"code":"var _jsxFileName = \"/Users/chavarias/Desktop/informatica/kaizen/src/components/layout/secciones/tareas/evidencia.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport firebase from 'firebase';\nimport moment from \"moment\";\n\nclass evidencia extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      nArray: ''\n    };\n  }\n\n  finaliarTarea() {\n    const param = [];\n    firebase.database().ref('tareas/' + this.props.tarea.key + '/responsables').once(\"value\").then(snapshot => {\n      firebase.database().ref('tareas/' + this.props.tarea.key + '/responsables/' + snapshot.val().findIndex(responsable => responsable.referencia === this.props.usuario.referencia)).update({\n        estatustarea: 'realizada'\n      });\n      param.push({\n        photoURL: this.props.usuario.photoURL,\n        usuario: this.props.usuario.displayname,\n        texto: 'termino la tarea',\n        fecha: moment().format('YYYY-MM-DD')\n      });\n      firebase.database().ref('tareas/' + this.props.tarea.key + '/historial').push({\n        param\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 13\n      }\n    }, \"Finalizaste tu tarea, \\xBFdeseas agregar una evidencia?\", /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.evidenciar(),\n      className: \"btn text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"u\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 84\n      }\n    }, \"Si\")), /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.finaliarTarea(),\n      className: \"btn text-white\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 102\n      }\n    }, /*#__PURE__*/React.createElement(\"u\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 172\n      }\n    }, \"No\")));\n  }\n\n}\n\nconst mapStateProps = state => ({\n  usuario: state.info\n});\n\nconst mapDispatchToprops = dispatch => ({\n  UpdateShow(show) {\n    dispatch({\n      type: 'Show',\n      show\n    });\n  },\n\n  tareadetalles(tareadetalles) {\n    dispatch({\n      type: 'Tarea',\n      tareadetalles\n    });\n  }\n\n});\n\nexport default connect(mapStateProps, mapDispatchToprops)(evidencia);","map":{"version":3,"sources":["/Users/chavarias/Desktop/informatica/kaizen/src/components/layout/secciones/tareas/evidencia.jsx"],"names":["React","Component","connect","firebase","moment","evidencia","constructor","props","state","nArray","finaliarTarea","param","database","ref","tarea","key","once","then","snapshot","val","findIndex","responsable","referencia","usuario","update","estatustarea","push","photoURL","displayname","texto","fecha","format","render","evidenciar","mapStateProps","info","mapDispatchToprops","dispatch","UpdateShow","show","type","tareadetalles"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {connect} from 'react-redux'\nimport firebase from 'firebase'\nimport moment from \"moment\";\n\nclass evidencia extends Component {\n    constructor(props){\n        super(props)\n        this.state={\n            nArray:''\n        }\n    }\n    finaliarTarea(){\n            const param=[]\n            firebase.database().ref('tareas/'+this.props.tarea.key+'/responsables').once(\"value\").then((snapshot)=>{\n                firebase.database().ref('tareas/'+this.props.tarea.key+'/responsables/'+snapshot.val().findIndex(responsable => responsable.referencia === this.props.usuario.referencia)).update({estatustarea:'realizada'})\n                param.push(\n                    {\n                        photoURL:this.props.usuario.photoURL,\n                        usuario:this.props.usuario.displayname,\n                        texto:'termino la tarea',\n                        fecha:moment().format('YYYY-MM-DD')\n                    }\n                )\n                firebase.database().ref('tareas/'+this.props.tarea.key+'/historial').push({param})\n            }\n        )\n            \n            \n    }\n    render() {\n        return (\n            <div>\n                Finalizaste tu tarea, Â¿deseas agregar una evidencia?\n                <button onClick={()=>this.evidenciar()} className=\"btn text-white\"><u>Si</u></button><button onClick={()=>this.finaliarTarea()} className=\"btn text-white\"><u>No</u></button>\n            </div>\n        )\n    }\n}\nconst mapStateProps = state =>({\n    usuario:state.info,\n})\nconst mapDispatchToprops = dispatch =>({\n    UpdateShow(show){\n        dispatch({\n          type:'Show',\n          show\n        })\n      },\n      tareadetalles(tareadetalles){\n        dispatch({\n          type:'Tarea',\n          tareadetalles\n        })\n      },\n})\nexport default connect(mapStateProps,mapDispatchToprops)(evidencia)\n"]},"metadata":{},"sourceType":"module"}