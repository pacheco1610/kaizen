{"ast":null,"code":"var _jsxFileName = \"/Users/chavarias/Desktop/informatica/kaizen/src/components/layout/secciones/tareas/nuevatarea.jsx\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport DatePicker, { DateInput, TimeInput } from '@trendmicro/react-datepicker';\nimport Dropdown from '@trendmicro/react-dropdown';\nimport moment from \"moment\";\nimport firebase from 'firebase';\n\nrequire('moment/locale/es.js');\n\nclass nuevatarea extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      titulo: '',\n      descripcion: '',\n      date: moment().format('YYYY-MM-DD'),\n      responsables: [],\n      filter: this.props.colaboradores,\n      text: '',\n      time: moment().format('hh:mm:ss')\n    };\n  }\n\n  DropdownColaboradorOut() {\n    if (this.state.text == '') {\n      document.querySelector('.dropdownCol').classList.add('toggle');\n    }\n  }\n\n  DropdownColaborador() {\n    document.querySelector('.dropdownCol').classList.remove('toggle');\n  }\n\n  filter(event) {\n    var text = event.target.value;\n    const data = this.props.colaboradores;\n    const newData = data.filter(function (item) {\n      const itemDataTitle = item.displayname.toUpperCase();\n      const itemDataDescp = item.puesto.Puesto.toUpperCase();\n      const campo = itemDataTitle + \" \" + itemDataDescp;\n      const textData = text.toUpperCase();\n      return campo.indexOf(textData) > -1;\n    });\n    this.setState({\n      filter: newData,\n      text: text\n    });\n  }\n\n  removeResponsable(referencia) {\n    this.setState({\n      responsables: this.state.responsables.filter(item => item.referencia != referencia)\n    });\n  }\n\n  addResponsable(responsable) {\n    const {\n      responsables\n    } = this.state;\n    responsables.push({\n      displayname: responsable.displayname,\n      empresa: responsable.empresa,\n      estatus: responsable.estatus,\n      permisos: responsable.permisos,\n      photoURL: responsable.photoURL,\n      referencia: responsable.referencia,\n      estatustarea: 'pendiente',\n      fechaAsignada: moment().format('YYYY-MM-DD')\n    });\n    this.setState({\n      responsables: responsables,\n      text: '',\n      filter: []\n    });\n    document.querySelector('.dropdownCol').classList.add('toggle');\n  }\n\n  HandleClickCalendar(date) {\n    this.setState({\n      date: date\n    });\n    document.querySelector('.dropdwonToggle').classList.remove('dropdown---open---1ju75');\n    document.querySelector('.dropdwonToggle').classList.remove('buttons---open---1ju75');\n    document.querySelector('.btn-edit-dropp').setAttribute(\"aria-expanded\", \"false\");\n  }\n\n  AltaTarea() {\n    const tarea = {\n      titulo: this.state.titulo,\n      descripcion: this.state.descripcion,\n      fecha: this.state.date,\n      responsables: this.state.responsables,\n      empresa: this.props.usuario.empresa,\n      asignador: this.props.usuario,\n      estatus: 'pendiente',\n      fechaCreada: moment().format('YYYY-MM-DD')\n    };\n\n    if (firebase.database().ref('tareas').push(tarea)) {\n      this.setState({\n        titulo: '',\n        descripcion: '',\n        date: moment().format('YYYY-MM-DD'),\n        responsables: [],\n        filter: [],\n        text: '',\n        empresa: '',\n        asignador: '',\n        estatus: ''\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-3\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.titulo,\n      onChange: e => this.setState({\n        titulo: e.target.value\n      }),\n      type: \"text\",\n      name: \"Titulo\",\n      className: \"form-control rounded-1\",\n      placeholder: \"Titulo de la tarea\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-12 col-xl-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"title-tarea  \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 29\n      }\n    }, \"Fecha de entrega\"), /*#__PURE__*/React.createElement(Dropdown, {\n      className: \"dropdwonToggle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(Dropdown.Toggle, {\n      btnStyle: \"link\",\n      noCaret: true,\n      style: {\n        padding: 0,\n        border: 1,\n        backgroundColor: 'white'\n      },\n      className: \"btn-edit-dropp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(DateInput, {\n      value: this.state.date,\n      onChange: value => {\n        this.setState({\n          date: value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 41\n      }\n    })), /*#__PURE__*/React.createElement(Dropdown.Menu, {\n      style: {\n        padding: 8\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(DatePicker, {\n      date: this.state.date,\n      onSelect: date => this.HandleClickCalendar(date),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 41\n      }\n    }), /*#__PURE__*/React.createElement(TimeInput, {\n      value: this.state.time,\n      onChange: value => {\n        this.setState(state => ({\n          time: value\n        }));\n      },\n      style: {\n        top: 8,\n        bottom: 8\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 42\n      }\n    })))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-12 col-xl-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"title-tarea mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 33\n      }\n    }, \"Responsables\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-12 col-xl-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"TextResponsables\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 33\n      }\n    }, this.state.responsables.map(responsable => /*#__PURE__*/React.createElement(\"span\", {\n      key: responsable.referencia,\n      className: \"badge badge-pill badge-light badgedResponsable m-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 45\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"\",\n      className: \"mt-1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 49\n      }\n    }, responsable.displayname), \" \", /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-default btn-circle ml-1\",\n      onClick: () => this.removeResponsable(responsable.referencia),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 119\n      }\n    }, \"x\"))), /*#__PURE__*/React.createElement(\"input\", {\n      value: this.state.text,\n      onChange: text => this.filter(text),\n      onBlur: () => this.DropdownColaboradorOut(),\n      onFocus: () => this.DropdownColaborador(),\n      className: \"inputResponsables\",\n      placeholder: \"\",\n      type: \"text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dropdownCol shadow toggle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 33\n      }\n    }, this.state.filter.map(colaborador => /*#__PURE__*/React.createElement(\"div\", {\n      key: colaborador.referencia,\n      className: \"col-12 btn\",\n      onClick: () => this.addResponsable(colaborador),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 41\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"title-colaborador\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 145\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: colaborador.photoURL,\n      alt: \"...\",\n      className: \"img-colaborador rounded-circle img-thumbnail mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 181\n      }\n    }), \" \", colaborador.displayname, \" \", /*#__PURE__*/React.createElement(\"small\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 314\n      }\n    }, colaborador.puesto.Puesto)))))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-12 col-xl-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      className: \"title-tarea  mr-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 33\n      }\n    }, \"Descripci\\xF3n\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-md-12 col-xl-12\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"textarea\", {\n      value: this.state.descripcion,\n      onChange: e => this.setState({\n        descripcion: e.target.value\n      }),\n      name: \"\",\n      className: \"TextResponsables\",\n      placeholder: \"Agregar mas detalles a esta tarea\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 33\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 mb-4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.AltaTarea(),\n      className: \"btn btn-general btn-block\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174,\n        columnNumber: 25\n      }\n    }, \"Asignar Tarea\"))));\n  }\n\n}\n\nconst mapStateProps = state => ({\n  colaboradores: state.colaboradores,\n  usuario: state.info\n});\n\nexport default connect(mapStateProps, null)(nuevatarea);","map":{"version":3,"sources":["/Users/chavarias/Desktop/informatica/kaizen/src/components/layout/secciones/tareas/nuevatarea.jsx"],"names":["React","Component","connect","DatePicker","DateInput","TimeInput","Dropdown","moment","firebase","require","nuevatarea","constructor","props","state","titulo","descripcion","date","format","responsables","filter","colaboradores","text","time","DropdownColaboradorOut","document","querySelector","classList","add","DropdownColaborador","remove","event","target","value","data","newData","item","itemDataTitle","displayname","toUpperCase","itemDataDescp","puesto","Puesto","campo","textData","indexOf","setState","removeResponsable","referencia","addResponsable","responsable","push","empresa","estatus","permisos","photoURL","estatustarea","fechaAsignada","HandleClickCalendar","setAttribute","AltaTarea","tarea","fecha","usuario","asignador","fechaCreada","database","ref","render","e","padding","border","backgroundColor","top","bottom","map","colaborador","mapStateProps","info"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport {connect} from 'react-redux'\n\nimport DatePicker, { DateInput , TimeInput } from '@trendmicro/react-datepicker';\nimport Dropdown from '@trendmicro/react-dropdown';\nimport moment from \"moment\";\nimport firebase from 'firebase'\n\nrequire('moment/locale/es.js');\nclass nuevatarea extends Component {\n   constructor(props){\n       super(props)\n       this.state={\n        titulo:'',\n        descripcion:'',\n        date: moment().format('YYYY-MM-DD'),\n        responsables:[],\n        filter:this.props.colaboradores,\n        text:'',\n        time:moment().format('hh:mm:ss')\n        };\n   }\n\n   DropdownColaboradorOut(){\n       if (this.state.text=='') {\n        document.querySelector('.dropdownCol').classList.add('toggle')\n       }\n   }\n   DropdownColaborador(){\n        document.querySelector('.dropdownCol').classList.remove('toggle')\n   }\n   filter(event){\n    var text = event.target.value\n      const data = this.props.colaboradores\n      const newData = data.filter(function(item){\n          const itemDataTitle = item.displayname.toUpperCase()\n          const itemDataDescp = item.puesto.Puesto.toUpperCase()\n          const campo = itemDataTitle+\" \"+itemDataDescp\n          const textData = text.toUpperCase()\n          return campo.indexOf(textData) > -1\n      })\n      this.setState({\n          filter: newData,\n          text:text\n      })\n   }\n   removeResponsable(referencia){\n    this.setState({responsables:this.state.responsables.filter(item=>item.referencia!=referencia)})\n   }\n   addResponsable(responsable){\n       const {responsables}=this.state\n        responsables.push({\n            displayname:responsable.displayname,\n            empresa:responsable.empresa,\n            estatus:responsable.estatus,\n            permisos:responsable.permisos,\n            photoURL:responsable.photoURL,\n            referencia:responsable.referencia,\n            estatustarea:'pendiente',\n            fechaAsignada:moment().format('YYYY-MM-DD')\n        })\n        this.setState({responsables:responsables,text:'',filter:[]})\n        document.querySelector('.dropdownCol').classList.add('toggle')\n   }\n   HandleClickCalendar(date){\n    this.setState({ date: date });\n    document.querySelector('.dropdwonToggle').classList.remove('dropdown---open---1ju75')\n    document.querySelector('.dropdwonToggle').classList.remove('buttons---open---1ju75')\n    document.querySelector('.btn-edit-dropp').setAttribute(\"aria-expanded\", \"false\")\n   }\n   AltaTarea(){\n       const tarea={\n           titulo:this.state.titulo,\n           descripcion:this.state.descripcion,\n           fecha:this.state.date,\n           responsables:this.state.responsables,\n           empresa:this.props.usuario.empresa,\n           asignador:this.props.usuario,\n           estatus:'pendiente',\n           fechaCreada:moment().format('YYYY-MM-DD')\n       }\n       if (firebase.database().ref('tareas').push(tarea)) {\n           this.setState({\n            titulo:'',\n            descripcion:'',\n            date: moment().format('YYYY-MM-DD'),\n            responsables:[],\n            filter:[],\n            text:'',\n            empresa:'',\n            asignador:'',\n            estatus:''\n           })\n       }\n        \n   }\n    render() {\n        return (\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-12 mb-3\">\n                        <input value={this.state.titulo} onChange={(e)=>this.setState({titulo:e.target.value})} type=\"text\" name=\"Titulo\" className=\"form-control rounded-1\" placeholder=\"Titulo de la tarea\"/>\n                    </div>\n                    <div className=\"col-12 mb-2\">\n                        <div className=\"row\">\n                            <div className=\"col-12 col-md-12 col-xl-12\">\n                            <span className=\"title-tarea  \">Fecha de entrega</span>\n                                <Dropdown className=\"dropdwonToggle\">\n                                    <Dropdown.Toggle\n                                        btnStyle=\"link\"\n                                        noCaret\n                                        style={{ padding: 0, border: 1, backgroundColor: 'white' }}\n                                        className=\"btn-edit-dropp\"\n                                    >\n                                        <DateInput\n                                            value={this.state.date}\n                                            onChange={value => {\n                                                this.setState({ date: value });\n                                            }}\n                                        />\n                                    </Dropdown.Toggle>\n                                    <Dropdown.Menu style={{ padding: 8 }}>\n                                        <DatePicker\n                                            date={this.state.date}\n                                            onSelect={date =>this.HandleClickCalendar(date)}\n                                        />\n                                         <TimeInput\n                                            value={this.state.time}\n                                            onChange={value => {\n                                                this.setState(state => ({ time: value }));\n                                            }}\n                                            style={{ top: 8,bottom:8}}\n                                        />\n                                    </Dropdown.Menu>\n                                </Dropdown>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-12 mb-2\">\n                        <div className=\"row\">\n                            <div className=\"col-12 col-md-12 col-xl-12\">\n                                <span className=\"title-tarea mr-2\">Responsables</span> \n                            </div>\n                            <div className=\"col-12 col-md-12 col-xl-12\">\n                                <div className=\"TextResponsables\">\n                                    {this.state.responsables.map(responsable=>\n                                            <span key={responsable.referencia} className=\"badge badge-pill badge-light badgedResponsable m-1\">\n                                                <label htmlFor=\"\" className=\"mt-1\" >{responsable.displayname}</label> <button className=\"btn btn-default btn-circle ml-1\" onClick={()=>this.removeResponsable(responsable.referencia)} >x</button>\n                                            </span>\n                                        )}\n                                    <input value={this.state.text} onChange={(text) => this.filter(text)} onBlur={()=>this.DropdownColaboradorOut()} onFocus={()=>this.DropdownColaborador()} className=\"inputResponsables\" placeholder=\"\" type=\"text\"/>\n                                </div>\n                                <div className=\"dropdownCol shadow toggle\">\n                                    {this.state.filter.map(colaborador=>\n                                        <div key={colaborador.referencia} className=\"col-12 btn\" onClick={()=>this.addResponsable(colaborador)}><span className=\"title-colaborador\"><img src={colaborador.photoURL} alt=\"...\" className=\"img-colaborador rounded-circle img-thumbnail mr-2\" /> {colaborador.displayname} <small>{colaborador.puesto.Puesto}</small></span></div>\n                                    )}\n                                </div>\n                            </div>\n                        </div>\n                        \n                      \n                    </div>\n                    <div className=\"col-12 mb-2\">\n                        <div className=\"row\">\n                            <div className=\"col-12 col-md-12 col-xl-12\">\n                                <span className=\"title-tarea  mr-2\">Descripci√≥n</span>\n                            </div>\n                            <div className=\"col-12 col-md-12 col-xl-12\">\n                                <textarea value={this.state.descripcion} onChange={(e)=>this.setState({descripcion:e.target.value})} name=\"\" className=\"TextResponsables\" placeholder=\"Agregar mas detalles a esta tarea\"></textarea>\n                            </div>\n                        </div>\n                    </div>\n                    <div className=\"col-12 mb-4\">\n                        <button onClick={()=>this.AltaTarea()} className=\"btn btn-general btn-block\">Asignar Tarea</button>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nconst mapStateProps = state =>({\n    colaboradores:state.colaboradores,\n    usuario:state.info,\n})\nexport default connect(mapStateProps,null)(nuevatarea);"]},"metadata":{},"sourceType":"module"}