{"ast":null,"code":"var _jsxFileName = \"/Users/chavarias/Desktop/informatica/kaizen/src/components/layout/nuevousuario/colaborador.jsx\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase';\nimport { connect } from 'react-redux';\nimport { ToastContainer, toast } from 'react-toastify';\n\nclass colaborador extends Component {\n  constructor(props) {\n    super(props);\n\n    this.toggledView = view => {\n      this.props.toggledView(view);\n    };\n\n    this.notifyTopCenter = () => toast.warning(\"Tu referencia no existe\", {\n      position: toast.POSITION.TOP_CENTER\n    });\n\n    this.state = {\n      referencia: '',\n      usuarioRef: '',\n      usuarioKey: ''\n    };\n  }\n\n  registrar() {\n    firebase.database().ref('usuarios').orderByChild('referencia').equalTo(this.state.referencia).once(\"value\").then(snapshot => {\n      if (snapshot.exists()) {\n        snapshot.forEach(childSnapshot => {\n          this.setState({\n            usuarioKey: childSnapshot.key\n          });\n        });\n        let usuarioRef = Object.values(snapshot.val());\n        this.setState({\n          usuarioRef: usuarioRef[0]\n        });\n\n        if (firebase.database().ref('usuarios/' + this.state.usuarioKey).set(null)) {\n          const paramsUsuario = {\n            displayname: this.props.usuario.displayName,\n            photoURL: this.props.usuario.photoURL,\n            empresa: this.state.usuarioRef.empresa,\n            estatus: 'true',\n            referencia: this.state.usuarioRef.referencia,\n            puesto: this.state.usuarioRef.puesto,\n            permisos: this.state.usuarioRef.permisos\n          };\n\n          if (firebase.database().ref('usuarios').child(firebase.auth().currentUser.uid).set(paramsUsuario)) {\n            window.location.reload();\n          }\n        }\n      } else {\n        this.notifyTopCenter();\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"wrapper-bienvenida\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(ToastContainer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container container-bienvenida\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 17\n      }\n    }, \"Comienza\"), /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, \"Por favor ingresa la referencia que te otorgo tu empresa\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 col-xl-4 col-md-6\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      name: \"nombre\",\n      className: \"form-control rounded-1\",\n      placeholder: \"Nombre de tu empresa\",\n      onChange: e => {\n        this.setState({\n          referencia: e.target.value\n        });\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 25\n      }\n    }))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row justify-content-center mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-general btn-block col-xl-4 col-md-6\",\n      onClick: () => this.registrar(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }\n    }, \"Registrarme\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"d-flex mr-auto mt-2\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-general ml-auto\",\n      onClick: () => this.toggledView(0),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }\n    }, \"Volver\"))));\n  }\n\n}\n\nconst mapStateProps = state => ({\n  usuario: state.info\n});\n\nexport default connect(mapStateProps, null)(colaborador);","map":{"version":3,"sources":["/Users/chavarias/Desktop/informatica/kaizen/src/components/layout/nuevousuario/colaborador.jsx"],"names":["React","Component","firebase","connect","ToastContainer","toast","colaborador","constructor","props","toggledView","view","notifyTopCenter","warning","position","POSITION","TOP_CENTER","state","referencia","usuarioRef","usuarioKey","registrar","database","ref","orderByChild","equalTo","once","then","snapshot","exists","forEach","childSnapshot","setState","key","Object","values","val","set","paramsUsuario","displayname","usuario","displayName","photoURL","empresa","estatus","puesto","permisos","child","auth","currentUser","uid","window","location","reload","render","e","target","value","mapStateProps","info"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport firebase from 'firebase';\nimport {connect} from 'react-redux'\nimport { ToastContainer, toast } from 'react-toastify';\n\nclass colaborador extends Component {\n    constructor(props){\n        super(props)\n        this.state={\n            referencia:'',\n            usuarioRef:'',\n            usuarioKey:''\n        }\n    }\n    toggledView=(view)=>{\n        this.props.toggledView(view)\n    }\n    registrar(){\n        firebase.database().ref('usuarios').orderByChild('referencia').equalTo(this.state.referencia).once(\"value\")\n        .then((snapshot)=> {\n            if (snapshot.exists()) {\n                snapshot.forEach((childSnapshot)=> {\n                   this.setState({usuarioKey:childSnapshot.key})\n                });\n                let usuarioRef = Object.values(snapshot.val())\n                this.setState({usuarioRef:usuarioRef[0]})\n\n                if (firebase.database().ref('usuarios/'+this.state.usuarioKey).set(null)) {\n                    const paramsUsuario={\n                        displayname:this.props.usuario.displayName,\n                        photoURL:this.props.usuario.photoURL,\n                        empresa:this.state.usuarioRef.empresa,\n                        estatus:'true',\n                        referencia:this.state.usuarioRef.referencia,\n                        puesto:this.state.usuarioRef.puesto,\n                        permisos:this.state.usuarioRef.permisos\n                }\n                if (firebase.database().ref('usuarios').child(firebase.auth().currentUser.uid).set(paramsUsuario)) {\n                    window.location.reload(); \n                }\n                }\n                \n            }\n            else{\n                this.notifyTopCenter()\n            }\n        })\n    }\n    notifyTopCenter = () =>\n    toast.warning(\"Tu referencia no existe\", {\n        position: toast.POSITION.TOP_CENTER\n    })\n    render() {\n        return (\n            <div className='wrapper-bienvenida'>\n                <ToastContainer />\n            <div className=\"container container-bienvenida\">\n                <h1>Comienza</h1>\n                <span>Por favor ingresa la referencia que te otorgo tu empresa</span>\n                <div className=\"row justify-content-center mt-2\">\n                    <div className=\"col-12 col-xl-4 col-md-6\">\n                        <input type=\"text\" name=\"nombre\" className=\"form-control rounded-1\" placeholder=\"Nombre de tu empresa\"\n                        onChange={(e)=>{this.setState({referencia: e.target.value} );}}\n                        />\n                    </div>\n                </div>\n                <div className=\"row justify-content-center mt-2\">\n                    <button className=\"btn btn-general btn-block col-xl-4 col-md-6\" onClick={()=>this.registrar()}>Registrarme</button>\n                </div>\n                <div className=\"d-flex mr-auto mt-2\">\n                    <button className=\"btn btn-general ml-auto\" onClick={()=>this.toggledView(0)}>Volver</button>\n                </div>\n            </div>\n        </div>\n        )\n    }\n}\nconst mapStateProps = state =>({\n    usuario: state.info,\n})\nexport default connect(mapStateProps,null)(colaborador)"]},"metadata":{},"sourceType":"module"}